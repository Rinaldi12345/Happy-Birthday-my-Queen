<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday – Della Putri Andini</title>

<style>
/* —— Latar & tipografi —— */
html,body{
  margin:0;
  height:100%;
  overflow:hidden;
  background:radial-gradient(circle at top, #ffd1dc 0%, #ff9a9e 100%);
  font-family:'Comic Sans MS', cursive;
}

/* —— Panggung utama —— */
#scene{
  position:relative;
  width:100%;
  height:100%;
  display:flex;
  align-items:flex-end;
  justify-content:center;
}

/* —— Batang & bunga —— */
.tulip{
  position:relative;
  width:120px;
  height:200px;
  animation:bloom 6s ease-in-out forwards 2s;
}

/* Batang */
.tulip::before{
  content:'';
  position:absolute;
  left:50%; bottom:0;
  transform:translateX(-50%);
  width:10px; height:180px;
  background:#2ecc71;
  border-radius:5px;
}

/* Tiga kelopak */
.petal{
  position:absolute;
  bottom:180px; left:50%;
  transform-origin:bottom center;
  background:#e74c3c;
  width:0; height:0;
  border-radius:50% 50% 0 0;
  transform:translate(-50%,0) scaleY(0.3);
}

/* Animasi tiap kelopak */
.petal:nth-child(1){width:70px;height:100px;animation:petal1 6s ease-in-out forwards 2s;}
.petal:nth-child(2){width:70px;height:100px;animation:petal2 6s ease-in-out forwards 2s;}
.petal:nth-child(3){width:70px;height:100px;animation:petal3 6s ease-in-out forwards 2s;}

@keyframes petal1{
  0%  {transform:translate(-50%,0) rotate(0deg)  scaleY(0.5);}
  60% {transform:translate(-50%,0) rotate(-30deg) scaleY(1);}
  100%{transform:translate(-50%,0) rotate(-40deg) scaleY(1);}
}
@keyframes petal2{
  0%  {transform:translate(-50%,0) rotate(0deg)  scaleY(0.5);}
  60% {transform:translate(-50%,0) rotate(30deg)  scaleY(1);}
  100%{transform:translate(-50%,0) rotate(40deg)  scaleY(1);}
}
@keyframes petal3{
  0%,40% {opacity:0;}
  60%,100%{opacity:1;transform:translate(-50%,10px) scaleY(1);}
}

/* Animasi skala keseluruhan bunga */
@keyframes bloom{
  0%  {transform:scale(0.6);}
  100%{transform:scale(1);}
}

/* —— Teks ucapan —— */
#msg{
  position:absolute;
  top:10%;
  width:100%;
  text-align:center;
  font-size:2.5em;
  letter-spacing:2px;
  opacity:0;
  animation:msg 2s ease-out forwards 6s; /* muncul saat mekar selesai */
}
@keyframes msg{
  0%  {transform:scale(0.3); opacity:0;}
  100%{transform:scale(1);   opacity:1;}
}

/* —— Kanvas kembang-api —— */
#fireworks{
  position:fixed;
  left:0; top:0;
  width:100%; height:100%;
  pointer-events:none;   /* klik tak terhalang */
}
</style>
</head>

<body>
<canvas id="fireworks"></canvas>

<div id="scene">
  <div class="tulip">
    <div class="petal"></div>
    <div class="petal"></div>
    <div class="petal"></div>
  </div>
</div>

<div id="msg">Happy Birthday Sayaangkuu<br>Della Putri Andini</div>

<script>
/* ========= KEMBANG API ========= */
/* Kanvas penuh layar */
const canvas=document.getElementById('fireworks'),
      ctx=canvas.getContext('2d');
let W,H;
function resize(){W=canvas.width=innerWidth;H=canvas.height=innerHeight;}
addEventListener('resize',resize); resize();

/* Partikel untuk percikan */
class Particle{
  constructor(x,y,angle,speed,color){
    this.x=x; this.y=y;
    this.vx=Math.cos(angle)*speed;
    this.vy=Math.sin(angle)*speed;
    this.alpha=1;
    this.color=color;
    this.size=3+Math.random()*3;
  }
  update(){
    this.x+=this.vx; this.y+=this.vy;
    this.vy+=0.05;           // gravitasi ringan
    this.alpha-=0.015;       // memudar
  }
  draw(){
    ctx.globalAlpha=this.alpha;
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.fillStyle=this.color;
    ctx.fill();
  }
}

let particles=[];
function launchFirework(){
  const x=Math.random()*W,
        y=H,
        peak=100+Math.random()*H*0.5,
        color=`hsl(${Math.random()*360},100%,60%)`;

  /* roket naik */
  const rocket=new Particle(x,y,-Math.PI/2,8+Math.random()*2,color);
  rocket.update=function(){
    this.x+=this.vx;
    this.y+=this.vy;
    if(this.y<peak){
      /* boom! */
      for(let i=0;i<60;i++){
        particles.push(new Particle(this.x,this.y,Math.random()*Math.PI*2,Math.random()*6+2,color));
      }
      this.alpha=0;          // roket hilang
    }
  };
  particles.push(rocket);
}

let lastTime=0;
function animate(time=0){
  requestAnimationFrame(animate);

  /* sapu bekas partikel secara halus (trail) */
  ctx.globalCompositeOperation='destination-out';
  ctx.fillStyle='rgba(0,0,0,0.2)';
  ctx.fillRect(0,0,W,H);
  ctx.globalCompositeOperation='lighter';

  /* waktu peluncuran baru */
  if(time-lastTime>400){
    launchFirework();
    lastTime=time;
  }

  /* gambar partikel aktif */
  particles.forEach((p,i)=>{
    p.update();
    p.draw();
    if(p.alpha<=0) particles.splice(i,1);
  });
}

/* Mulai kembang api setelah bunga mekar (6 detik) */
setTimeout(()=>animate(),6000);
</script>
</body>
</html>
