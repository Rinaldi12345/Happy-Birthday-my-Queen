<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flowers for Someone â€“ Safe Edition</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
/* === Latar & font === */
html,body{margin:0;height:100%;overflow:hidden;
  background:radial-gradient(circle at top,#ffeef4 0%,#cfe7ff 100%);
  font-family:'Segoe UI',sans-serif;}
/* â€”â€”â€” CANVAS fireworks & petal rain â€”â€”â€” */
canvas{position:fixed;inset:0;pointer-events:none}

/* â€”â€”â€” Bouquet wrapper â€”â€”â€” */
#garden{
  position:absolute;bottom:0;left:0;right:0;
  display:flex;gap:4vw;justify-content:center;align-items:flex-end;
  height:80%;
}

/* ======== GENERIC FLOWER ======== */
.flower{position:relative;transform:scale(0.3);opacity:0}
.flower.animate{animation:bloom 4s ease-in-out forwards}
@keyframes bloom{to{transform:scale(1);opacity:1}}
.stem{position:absolute;bottom:0;left:50%;transform:translateX(-50%);
  width:12px;height:260px;border-radius:6px;background:#3fa23f;
  background:linear-gradient(to top,#2e7d32,#66bb6a)}
.petal{position:absolute;bottom:260px;left:50%;width:90px;height:130px;
  transform-origin:bottom center;border-radius:50% 50% 0 0;opacity:0}
.flower.animate .petal{animation:petal-open 3s ease-out forwards}
@keyframes petal-open{0%{opacity:0;transform:translate(-50%,0) scale(0.2)}
60%{opacity:1}100%{opacity:1;transform:translate(-50%,0) scale(1)}}

/* Mawar merah */
.rose .petal{background:radial-gradient(circle at top left,#ff7373 0%,#c62828 90%)}
.rose .petal:nth-child(1){--r:0deg}
.rose .petal:nth-child(2){--r:40deg}
.rose .petal:nth-child(3){--r:-40deg}

/* Tulip putih */
.tulip .petal{background:radial-gradient(circle at top,#ffffff 0%,#e0e0e0 90%)}
.tulip .petal:nth-child(1){--r:0deg}
.tulip .petal:nth-child(2){--r:35deg}
.tulip .petal:nth-child(3){--r:-35deg}
.tulip .petal:nth-child(4){--r:17deg}
.tulip .petal:nth-child(5){--r:-17deg}

/* Sunflower kuning */
.sun .petal{background:radial-gradient(circle at top,#ffe082 0%,#ffb300 90%)}
.sun .petal{width:80px;height:120px}
.sun .petal:nth-child(1){--r:0deg}
.sun .petal:nth-child(2){--r:60deg}
.sun .petal:nth-child(3){--r:-60deg}
.sun .petal:nth-child(4){--r:120deg}
.sun .petal:nth-child(5){--r:-120deg}

/* Rotasi tiap kelopak via CSS var */
.petal{transform:translate(-50%,0) rotate(var(--r,0deg)) scale(0.3)}
.flower.animate .petal{animation:petal-open 2.8s cubic-bezier(.3,1.5,.5,1) forwards}

/* â€”â€”â€” Ucapan â€”â€”â€” */
#msg{position:absolute;top:8%;left:0;right:0;text-align:center;
  font-size:2.7em;font-weight:600;letter-spacing:1px;
  color:#d6336c;text-shadow:2px 2px 10px rgba(0,0,0,0.15);
  opacity:0;transform:scale(.6)}
#msg.show{animation:msgpop 2.2s ease-out forwards}
@keyframes msgpop{to{opacity:1;transform:scale(1)}}
</style>
</head>
<body>
<canvas id="petals"></canvas>
<canvas id="fireworks"></canvas>

<div id="garden">
  <!-- Mawar -->
  <div class="flower rose" id="f1">
    <div class="stem"></div>
    <div class="petal"></div><div class="petal"></div><div class="petal"></div>
  </div>
  <!-- Tulip -->
  <div class="flower tulip" id="f2">
    <div class="stem"></div>
    <div class="petal"></div><div class="petal"></div><div class="petal"></div>
    <div class="petal"></div><div class="petal"></div>
  </div>
  <!-- Sunflower -->
  <div class="flower sun" id="f3">
    <div class="stem"></div>
    <div class="petal"></div><div class="petal"></div><div class="petal"></div>
    <div class="petal"></div><div class="petal"></div>
  </div>
</div>

<div id="msg">Happy&nbsp;Birthday&nbsp;Sayaangkuu<br>Della&nbsp;Putri&nbsp;Andini&nbsp;ðŸŒ¸</div>

<script>
/* ============ Jadwal animasi bunga ============ */
const flowers=[document.getElementById('f1'),
               document.getElementById('f2'),
               document.getElementById('f3')];
flowers.forEach((f,i)=>setTimeout(()=>f.classList.add('animate'),1800+i*2200));
setTimeout(()=>document.getElementById('msg').classList.add('show'),7500);

/* ============ Kelopak jatuh ============ */
const petalCanvas=document.getElementById('petals'),
      pCtx=petalCanvas.getContext('2d');
let W,H;function resize(){W=petalCanvas.width=innerWidth;H=petalCanvas.height=innerHeight}
addEventListener('resize',resize);resize();
class FallingPetal{
  constructor(){
    this.reset();
  }
  reset(){
    this.x=Math.random()*W;
    this.y=-20-Math.random()*H;
    this.speed=1+Math.random()*1.5;
    this.size=8+Math.random()*8;
    this.swing=Math.random()*2*Math.PI;
  }
  update(){
    this.y+=this.speed;
    this.swing+=0.03;
    this.x+=Math.sin(this.swing)*0.6;
    if(this.y>H+20) this.reset();
  }
  draw(){
    pCtx.beginPath();
    pCtx.fillStyle='rgba(255,182,193,0.8)';
    pCtx.ellipse(this.x,this.y,this.size*0.6,this.size,Math.PI/4,0,Math.PI*2);
    pCtx.fill();
  }
}
const petals=Array.from({length:60},()=>new FallingPetal());
function animatePetals(){
  requestAnimationFrame(animatePetals);
  pCtx.clearRect(0,0,W,H);
  petals.forEach(p=>{p.update();p.draw()});
}
animatePetals();

/* ============ Fireworks ============ */
const fireCanvas=document.getElementById('fireworks'),
      fCtx=fireCanvas.getContext('2d');
function resizeFire(){fireCanvas.width=innerWidth;fireCanvas.height=innerHeight}
addEventListener('resize',resizeFire);resizeFire();
class Particle{
  constructor(x,y,color){
    const angle=Math.random()*2*Math.PI,
          speed=Math.random()*5+2;
    this.x=x;this.y=y;
    this.vx=Math.cos(angle)*speed;
    this.vy=Math.sin(angle)*speed;
    this.alpha=1;this.color=color;this.size=2+Math.random()*3;
  }
  update(){
    this.x+=this.vx;this.y+=this.vy;
    this.vy+=0.05;this.alpha-=0.015;
  }
  draw(){
    fCtx.globalAlpha=this.alpha;
    fCtx.beginPath();
    fCtx.arc(this.x,this.y,this.size,0,Math.PI*2);
    fCtx.fillStyle=this.color;fCtx.fill();
  }
}
const boomParticles=[];
function boom(x,y){
  const c=`hsl(${Math.random()*360},100%,60%)`;
  for(let i=0;i<70;i++) boomParticles.push(new Particle(x,y,c));
}
let lastBoom=0;
function animateFire(t=0){
  requestAnimationFrame(animateFire);
  fCtx.globalCompositeOperation='destination-out';
  fCtx.fillStyle='rgba(0,0,0,.25)';
  fCtx.fillRect(0,0,fireCanvas.width,fireCanvas.height);
  fCtx.globalCompositeOperation='lighter';
  if(t-lastBoom>900){boom(Math.random()*fireCanvas.width,Math.random()*fireCanvas.height*0.5,c);lastBoom=t;}
  boomParticles.forEach((p,i)=>{p.update();p.draw();if(p.alpha<=0)boomParticles.splice(i,1);});
}
/* Mulai kembang-api setelah semua bunga mekar */
setTimeout(()=>animateFire(),8000);
</script>
</body>
</html>
